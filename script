// ==UserScript==
// @name         繁簡自由切換
// @name:zh-CN   简繁自由切换
// @name:ja      简繁
// @name:en      Switch Traditional Chinese and Simplified Chinese
// @namespace    hoothin
// @version      1.1.2
// @description        任意轉換網頁中的簡體中文與繁體中文（默認簡體→繁體）
// @description:zh-CN  任意转换网页中的简体中文与繁体中文（默认繁体→简体）
// @description:ja     简繁中国語に変換
// @description:en     Just Switch Traditional Chinese and Simplified Chinese
// @author       hoothin
// @include      *
// @grant        GM_setValue
// @grant        GM_getValue
// @grant        GM_registerMenuCommand
// @contributionURL https://www.paypal.com/cgi-bin/webscr?cmd=_donations&business=rixixi@sina.com&item_name=Greasy+Fork+donation
// @contributionAmount 1
// ==/UserScript==

(function() {
    'use strict';
    var auto=false;//是否自動切換至OS使用的默認語言
    var shortcutKey=119;//快捷鍵keyCode
    var lang = navigator.appName=="Netscape"?navigator.language:navigator.userLanguage;
    lang = lang.toLowerCase();
    var isSimple = (lang === "zh-cn" || lang === "zh-hans" || lang === "zh-sg" || lang === "zh-my");
    var action = 0;//1:noChange, 2:showSimplified, 3:showTraditional

    function stranText(txt){
        if(!txt)return "";
        if(action == 2){return simplized(txt);}
        else if(action == 3){return traditionalized(txt);}
    }

    function stranBody(pNode){
        var childs;
        if(pNode){
            childs=pNode.childNodes;
        }else{
            childs=document.documentElement.childNodes;
        }
        if(childs)
            for(var i=0;i<childs.length;i++){
                var child=childs.item(i);
                if(/BR|META|SCRIPT|HR|TEXTAREA/.test(child.tagName))continue;
                if(child.title){
                    let title=stranText(child.title);
                    if(child.title != title){
                        child.title=title;
                    }
                }
                if(child.alt){
                    let alt=stranText(child.alt);
                    if(child.alt != alt){
                        child.alt=alt;
                    }
                }
                if(child.tagName == "INPUT" && child.value !== "" && child.type != "text" && child.type != "search" && child.type != "hidden"){
                    let value=stranText(child.value);
                    if(child.value != value){
                        child.value=value;
                    }
                }else if(child.nodeType == 3){
                    let data=stranText(child.data);
                    if(child.data != data){
                        child.data=data;
                    }
                }else stranBody(child);
            }
    }

    var scStr='锕锿垲皑嗳蔼霭爱嫒暧瑷碍叆庵鞍谙暗鹌埯暗铵肮翱翱鳌鳌媪袄奥岙骜钯坝罢鲅霸坝摆呗败稗颁坂钣板绊办帮绑榜仿膀谤镑剥龅饱褓鸨宝报刨鲍刨杯杯背鹎贝狈备悖辈钡惫奔奔贲锛绷绷镚逼鲾秕笔毕闭诐哔痹荜铋币滗弊筚毙跸赑编边鳊笾贬缏辫辩变飑标膘镖飙飙飚骠镳骉表鳔鳖鳖别瘪别宾宾傧滨濒缤镔鬓摈殡膑髌鬓冰槟饼并并并并钵钵拨饽博钹铂驳驳鲌袯镈鹁卜钸补布钚财才睬采采采踩采彩参骖残惭惭蚕惨䅟黪灿仓伧沧苍舱鸧操艹册侧厕厕恻测策策层插锸馇查察镲诧钗侪虿觇掺搀婵禅蝉缠缠谗镵馋产产铲浐蒇谄铲阐冁忏颤伥阊鲳长苌肠尝场偿尝场厂厂怅玚畅钞车砗扯彻陈谌尘谌碜碜趁称龀榇衬谶撑赪柽蛏铛乘塍枨诚铖澄惩骋吃鸱痴驰迟耻齿敕饬炽冲冲虫宠铳酬酬绸俦帱仇畴筹踌酬仇雠仇雠丑瞅䝙出刍锄厨锄恹雏橱蹰储础处绌处触船传钏窗窗窗疮床闯创怆捶棰锤锤春纯唇淳莼莼醇鹑绰辍龊词辞糍辞鹚鹚赐囱匆从匆苁葱枞总聪骢丛丛凑辏粗粗蹴撺蹿镩攒纂篡窜脆村鹾锉错哒垯札达荙跶鞑呆轪带绐贷叇单郸担殚瘅箪掸胆啖诞啖弹惮当当当珰裆筜挡党挡谠凼砀荡垱档荡鱽岛捣导捣祷盗焘德锝灯邓凳镫堤䃅镝涤敌籴觌抵抵诋递蒂缔谛䗖颠巅癫点念钿电垫淀雕雕鲷雕吊钓莜铞调窎喋蝶谍叠鲽叠叠钉顶碇订碇锭丢铥东岽冬鸫峒冻动岽栋胨兜钭豆斗斗窦斗斗斗阇玳独渎椟渎椟牍犊读黩睹赌笃妒镀端缎锻断簖兑队对怼镦墩吨趸钝顿遁炖夺铎朵缍亸垛跺饳堕婀峨讹锇额鹅鹅讹恶恶厄厄垩轭萼饿谔阏锷颚鳄鹗腭鳄儿鲕鸸尔铒饵迩贰发发罚阀罚法珐发帆翻凡钒烦繁翻矾泛泛贩饭范钫鲂仿纺访仿飞绯鲱诽痱费废镄纷氛坟豮偾愤奋粪鲼风峰枫疯砜锋丰沣冯缝讽凤赗夫肤麸佛绂绋麸凫复韨辐幞辅抚附讣负妇复赋驸缚鲋赙鳆嘎钆该赅丐丐钙盖概乾尴尴杆秆赶鳡绀干干赣坑冈肛刚㭎纲钢岗杠戆皋槔糕稿缟镐皓诰锆胳纥合搁歌鸽阁镉个个铬给耕赓鹒绠鲠鲠亘宫躬龚巩贡钩沟钩缑鞴够构诟构觏购轱鸪毂鹘诂钴鼓谷馉鹄蛊雇锢鲴顾刮鸹剐挂诖拐拐怪关关鳏观管馆馆贯贯惯掼罐鹳广犷规妫闺妫规鲑龟归瑰鬶轨匦诡贵刽刿椢柜鳜衮滚绲辊鲧鲧呙埚锅蝈国国帼掴腘果椁馃过铪骇顸函韩悍焊闬汉焊颔绗颃嗥蚝号皓颢灏诃和合盍阂颌阖龁核鹖贺鹤恒横鸻轰红纮荭闳鸿黉唝讧哄糇后鲘鲎乎轷呼呼壶胡糊胡鹕浒户冱沪护鳠鹱花花华哗哗铧骅画话划桦婳怀坏欢欢獾还环锾缳镮缓奂唤换涣焕痪鲩黄锽鳇恍谎挥晖辉珲诙徽袆咴㧑翚辉回回回回蛔回蛔蛔蛔毁毁汇汇会毁汇贿诲哕浍荟讳桧烩秽缋绘翙昏荤阍浑馄诨锪钬伙货祸护获获镬饥绩叽缉赍机玑积击矶绩鸡讥饥跻鸡赍齑羁级极楫辑鹡几鱾挤虮纪计记迹际剂蓟哜济觊迹鲫系继霁鲚骥夹浃家夹镓郏荚蛱饸铗颊贾钾槚价驾戋奸坚笺间监笺缄缣鉴艰歼鳒鹣篯鲣鞯枧拣减笕戬俭捡检裥睑简茧谫锏谫碱见剑闲渐剑涧贱践剑剑荐谏键饯槛溅舰鉴鉴浆强姜僵缰缰鳉奖蒋桨奖讲将绛酱娇浇胶鲛䴔骄鹪绞剿脚侥铰饺挢矫缴搅叫较峤轿阶阶秸疖劫劫劫劫讦杰结节诘洁颉鲒届诫借斤琎卺仅尽紧锦谨馑劲晋进尽缙赆浕荩烬觐赆荆泾茎经鲸䴖惊井刭井阱颈弪径径迳净胫痉靓静镜竞垧炯䌹迥颎纠揪鸠阄韭厩厩旧鹫救锔驹局局举举榉龃讵钜剧据窭锯屦飓惧镌鹃镌卷锩倦隽眷绢狷决珏诀绝绝橛谲觉镢镢军钧皲鲪俊浚骏开锎凯剀垲恺锴铠闿咳慨忾龛侃坎碱阚瞰糠糠炕钪闶考铐疴轲钶颏颗壳克克缂课锞骒肯垦恳硁铿抠眍叩寇扣库绔裤喾夸块侩郐哙狯脍鲙宽髋款诓诳况贶邝圹旷矿纩矿窥亏窥岿骙愧匮愦溃蒉馈篑聩馈昆昆裈锟鲲鹍捆壸捆阃困扩阔阔辣腊腊蜡镴来俫崃徕涞莱梾铼睐赉赖赖濑癞籁岚蓝阑褴拦澜篮兰斓栏谰镧懒懒览揽榄缆滥烂琅螂锒阆捞劳唠崂痨铹铑涝耢乐鳓饹缧累镭诔垒泪类棱梨犁狸牦牦藜缡厘离漓蓠篱骊鲡鹂里里锂礼鲤逦鳢荔莅璃历栗莅厉历历励历历隶疠隶疬呖坜栎沥砺苈丽枥砾粝蛎俪疬郦跞轹雳璃俩连廉涟莲奁奁奁怜裢联帘镰鲢奁梿琏敛敛脸裣蔹炼练殓炼链潋恋凉梁辌粮两魉谅辆辽疗缭镣鹩钌了猎婪磷淋邻邻磷临麟辚鳞禀凛廪懔檩吝赁蔺躏凌铃绫菱鸰灵鲮龄棂灵棂领岭留琉刘琉瘤浏镏馏镠飗骝鹠柳柳绺锍溜鹨龙咙泷茏昽胧栊珑眬砻笼聋陇垄垄拢咔弄娄偻喽蒌楼耧蝼髅嵝搂溇篓瘘瘘镂噜撸卢垆庐泸芦栌炉胪垆舻轳炉颅鲈鸬卤虏卤鲁掳澛橹氇橹橹镥陆渌禄戮赂辂录录滤辘箓鹭闾榈驴吕侣屡铝褛缕稆绿绿虑娈孪峦挛栾脔滦銮鸾乱略锊抡仑伦囵仑沦纶轮论啰脶罗镙罗骡猡萝逻椤箩锣骡裸裸络荦骆泺呒妈嬷麻蟆马犸玛码蚂唛杩祃骂骂吗买荬脉麦脉劢卖迈颟瞒馒鳗蛮满螨缦谩镘猫锚帽帽铆冒贸么没梅梅镅鹛霉镁门扪钔闷焖懑们梦蒙蒙蒙鹲锰眯谜弥祢猕芈弥秘觅觅幂谧绵绵俯缅面面面鹋缈妙庙咩灭蔑珉缗缗泯愍闵黾闽悯鳘铭鸣缪谬么么模谟馍馍殁镆蓦谋亩幕钼拿拿镎纳钠你乃乃奶楠楠难馕挠蛲铙垴恼脑闹闹讷馁内铌霓鲵拟昵腻鲇鲶捻辇撵娘酿鸟袅袅茑袅捏陧岩啮聂镍孽嗫啮蹑镊颞宁宁咛拧狞苧柠聍泞纽钮农侬农哝浓脓秾驽钕疟暖暖傩诺锘欧殴瓯讴鸥呕怄沤盘盘蹒庞鳑狍疱炮炮胚赔锫佩辔喷鹏碰碰纰铍辟毗鲏罴骈谝骗骗缥飘飘贫频嫔颦瓶评凭凭鲆苹钋泼酦钷迫颇扑铺仆镤朴谱镨铺凄凄栖桤戚戚旗棋棋颀齐锜脐骑骐蕲鲯蛴鳍岂启启绮气讫弃憩碛荠牵钎佥铅悭愆迁谦签鹐骞签千乾钤钻钳荨钱浅肷潜缱谴伣堑椠纤羌呛戗枪玱锖跄锵镪强墙嫱蔷樯墙樯抢羟襁襁炝硗硗锹锹缲跷乔侨荞桥憔硚谯鞒憔峭壳诮窍翘惬箧锲窃嵚亲骎琴勤寝锓吣钦揿揿氢倾庼轻鲭顷请苘庆茕穷琼䓖丘秋秋鳅鳅虬球巯赇区曲诎岖驱趋曲躯麹驱鸲龋阒觑觑觑桊诠辁铨蜷鳈权颧绻劝却榷悫悫确阕阙鹊裙群裙冉让荛桡饶娆扰绕热妊纫纴讱轫韧韧饪认驲绒绒绒荣融嵘镕蝾冗铷颥缛软嫩软蕊蕊蕊锐睿闰润箬洒飒萨腮鳃赛毵伞糁伞馓颡丧缫骚鳋扫啬铯涩涩穑挲杀纱铩鲨筛晒删姗钐膻陕闪讪缮赡膳骟鳝鳝伤殇觞赏绱烧绍赊蛇舍厍设慑慑摄滠绅参参诜鲹审谂婶沈渖审肾渗瘆升声渑绳胜圣剩尸师浉湿狮诗鸤虱䴓湿鲺酾时埘莳实蚀识鲥驶柿是视视视贳势试轼铈饰适谥谥释寿绶寿兽倏书纾疏疏枢输倏摅赎薯庶术竖漱数竖树帅闩双骦鹴谁税顺说说硕烁铄丝咝厮缌蛳锶飔鸶似俟饲祀驷松怂耸讼颂诵搜锼馊飕擞薮苏稣苏苏溯诉肃溯谡骕鹔酸虽绥随岁岁谇孙狲荪飧笋损蓑缩唢琐锁它铊塔獭鳎拓沓挞阘闼骀台台鲐抬台钛态贪啴摊滩瘫坛谈坛昙锬坛坛谭坛钽袒叹掸叹赕汤趟镗铴饧糖镋傥烫韬绦掏绦绦涛韬绹鼗鼗梼讨铽誊腾藤䲢锑啼绨缇蹄题鹈体体屉剃剃阗腼条龆鲦眺俯粜贴铁铁铁厅烃听听厅铤颋同铜鲖统筒恸偷偷头秃涂涂图钍兔团砖抟团颓颓颓腿蜕饨鲀臀扦拖托脱驮驼鸵鼍椭萚箨娲洼蛙腽袜袜弯塆湾纨顽碗碗绾挽万玩亡往网辋望鳂为韦围帏沩为违维沩涠潍闱伟伪苇炜玮伪纬诿鲔韪猬卫卫谓喂喂温辒鳁纹闻蚊阌蚊吻稳问鹟瓮瓮涡莴窝挝蜗卧癯龌污污乌邬呜诬钨吴无芜鹀忤妩坞妩庑怃鹉务坞误雾骛鹜晰膝诶饻锡溪嘻牺习席觋袭鳛铣玺系郄细绤戏舄戏饩阋煅虾侠峡狭硖辖辖厦吓锨籼仙铦莶锨鲜跹纤弦衔闲衔娴娴挦贤痫咸鹇鹇鹇蚬险崄猃狝藓显岘苋现羡线线缐宪县馅献乡厢乡芗缃镶骧详享饷向鲞鲞响飨项向枭绡哓销萧鸮潇箫嚣嚣蟏骁晓筱效效啸啸敩蝎协挟胁胁邪携谐撷鞋携缬写泄屃绁绁绁亵谢泻蟹欣䜣锌镡衅兴骍陉钘铏幸凶汹胸讻诇修鸺馐绣褒锈绣锈吁虚须顼嘘媭谞须许诩恤勖叙叙婿恤溆绪续轩萱萱喧谖萱萱璇悬选癣绚楦铉旋靴学峃泶鳕谑勋埙勋埙熏巡寻询驯浔鲟徇讯训逊桠鸦鸭压鸦丫哑痖亚垭娅讶氩烟腌阉恹胭讠闫阎盐阎颜颜严檐岩岩盐兖演厣䶮俨鼹魇黡彦觃砚厌雁焰谚验咽艳赝赝燕燕餍验燕艳酽滟谳艳艳滟锳鸯阳扬扬旸杨炀疡钖扬飏养痒样尧轺摇遥瑶铫峣窑窑肴谣鳐夭药耀药鹞钥爷铘野野夜页叶业晔烨邺谒烨馌靥咿祎铱医医移诒贻饴仪遗彝颐彝迤钇蚁舣蚁侄异轶艺义诣勚亿瘗谊峄忆怿翳缢艺镒绎译议呓镱鹢鹝驿呓因阴堙阴荫殷喑铟骃吟淫淫訚银龂龈饮隐瘾荫慭䲟荥䓨婴应罂蓥嘤撄罂樱璎莺缨鹰莺鹦茔荧莹营萦萤溁潆蝇赢颍颖瘿映滢哟佣墉拥雍镛鳙痈颙恿涌咏恿踊鲬忧优邮犹游铀莸鱿鲉铕佑诱纡娱鱼嵛渔谀余觎逾欤玙舆俣伛与语铻屿龉饫驭钰预妪狱愈欲滪蓣谕阈御愈鹆誉鹬郁吁渊鸢鸳员猿园圆缘猿辕鼋橼远愿约彟钺悦钥粤钺阅阅岳跃钥赟匀纭郧云涢氲沄芸筼陨殒郓恽运愠晕缊酝酝蕴韫蕴韵匝扎扎臜杂杂灾灾灾载簪咱咱攒攒趱暂赞赞錾酂瓒赞赃赃脏赃驵葬脏糟凿枣皂唣灶噪灶则责啧帻择泽箦赜贼谮缯锃赠札齄轧闸闸铡鲊栅诈榨揸斋债沾毡毡谵鹯斩盏崭飐辗占栈绽战骣张獐涨绱帐账胀帐账照钊诏赵棹折辄蛰谪辙谪詟锗这浙鹧珍贞针侦浈桢祯砧针诊轸缜阵纼赈鸩镇争峥挣狰睁钲征筝征铮症帧证郑诤证卮只只栀织侄执絷职跖踯址纸轵帙帙置轾滞制志铚帜挚稚质致掷栉稚贽觯骘踬鸷锧终钟钟锺钟冢肿种众众周辀赒诌鸼轴帚咒纣昼荮皱绉骤朱诛铢诸猪潴槠橥烛煮属嘱瞩伫苎伫纻注贮箸驻筑铸专砖䏝砖颛转赚撰馔啭妆庄妆装桩壮状锥骓坠缀缒赘谆准桌斫斫诼镯浊斫䦃镯兹兹赀资缁辎谘锱镃鲻龇姊眦渍棕综踪鬃鬃偬总总粽疭纵邹诹鲰驺镞组诅躜钻缵罪樽鳟㑇㘎㤘䞍鲃鳚鳤鹮';
    var tcStr='錒鎄嵦皚噯藹靄愛嬡曖璦礙靉菴鞌諳闇鵪垵晻銨骯翶翺鰲鼇媼襖奧嶴驁鈀垻罷鮁覇壩擺唄敗粺頒岅鈑闆絆辦幫綁牓徬艕謗鎊剝齙飽緥鴇寶報鉋鮑鑤盃桮揹鵯貝狽備誖輩鋇憊逩犇賁錛綳繃鏰偪鰏粃筆畢閉詖嗶痺蓽鉍幣潷獘篳斃蹕贔編邊鯿籩貶緶辮辯變颮標臕鏢飆飇飈驃鑣驫錶鰾鱉鼈別癟彆賓賔儐濱瀕繽鑌髩擯殯臏髕鬢氷檳餅並併幷竝缽鉢撥餑愽鈸鉑駁駮鮊襏鎛鵓蔔鈽補佈鈈財纔倸埰寀採跴綵綵參驂殘慚慙蠶慘穇黲燦倉傖滄蒼艙鶬撡艸冊側厠廁惻測筞筴層挿鍤餷査詧鑔詫釵儕蠆覘摻攙嬋禪蟬繵纏讒鑱饞產産剷滻蕆諂鏟闡囅懺顫倀閶鯧長萇腸嘗塲償嚐場厰廠悵瑒暢鈔車硨撦徹陳訦塵諶硶磣趂稱齔櫬襯讖撐赬檉蟶鐺乗堘棖誠鋮澂懲騁喫鴟癡馳遲恥齒勅飭熾沖衝蟲寵銃詶酧綢儔幬雠疇籌躊醻讎讎讐讐醜矁貙齣芻耡廚鋤懨雛櫥躕儲礎処絀處觸舩傳釧窓牎牕瘡牀闖創愴搥箠錘鎚旾純脣湻蒓蓴醕鶉綽輟齪詞辤餈辭鶿鷀賜囪怱從悤蓯蔥樅緫聰驄樷叢湊輳觕麤蹵攛躥鑹欑篹簒竄脃邨鹺銼錯噠墶剳達薘躂韃獃軑帶紿貸靆單鄲擔殫癉簞撣膽啗誕噉彈憚當儅噹璫襠簹擋黨攩讜氹碭蕩壋檔盪魛島搗導擣禱盜燾悳鍀燈鄧櫈鐙隄磾鏑滌敵糴覿牴觝詆遞蔕締諦螮顛巔癲點唸鈿電墊澱彫琱鯛鵰弔釣蓧銱調窵啑蜨諜曡鰈疉疊釘頂矴訂椗錠丟銩東崬鼕鶇峝凍動崠棟腖兠鈄荳鬥鬦竇鬪鬬鬭闍蝳獨凟匵瀆櫝牘犢讀黷覩賭篤妬鍍耑緞鍛斷籪兌隊對懟鐓墪噸躉鈍頓遯燉奪鐸朶綞嚲垜跥飿墮娿峩訛鋨額鵝鵞譌惡噁戹阨堊軛蕚餓諤閼鍔顎鰐鶚齶鱷兒鮞鴯爾鉺餌邇貳發髪罰閥罸灋琺髮颿飜凣釩煩緐繙礬氾汎販飯範鈁魴倣紡訪髣飛緋鯡誹疿費廢鐨紛雰墳豶僨憤奮糞鱝風峯楓瘋碸鋒豐灃馮縫諷鳳賵伕膚麩彿紱紼粰鳧複韍輻襆輔撫坿訃負婦復賦駙縛鮒賻鰒嘠釓該賅匃匄鈣蓋槩亁尲尷桿稈趕鱤紺幹榦贛阬岡疘剛棡綱鋼崗槓戇臯橰餻槀縞鎬暠誥鋯肐紇閤擱謌鴿閣鎘個箇鉻給畊賡鶊綆骾鯁亙宮躳龔鞏貢鈎溝鉤緱韝夠搆詬構覯購軲鴣轂鶻詁鈷皷穀餶鵠蠱僱錮鯝顧颳鴰剮掛詿枴柺恠関關鰥觀筦舘館毌貫慣摜鑵鸛廣獷規媯閨嬀槼鮭龜歸瓌鬹軌匭詭貴劊劌槶櫃鱖袞滾緄輥鮌鯀咼堝鍋蟈囯國幗摑膕菓槨餜過鉿駭頇圅韓猂釬閈漢銲頷絎頏獋蠔號皜顥灝訶咊郃盇閡頜闔齕覈鶡賀鶴恆橫鴴轟紅紘葒閎鴻黌嗊訌鬨餱後鮜鱟虖軤嘑謼壺衚餬鬍鶘滸戶沍滬護鱯鸌芲蘤華嘩譁鏵驊畫話劃樺嫿懷壞懽歡貛還環鍰繯鐶緩奐喚換渙煥瘓鯇黃鍠鰉怳謊揮暉煇琿詼幑褘噅撝翬輝囘囬廻迴蚘逥痐蛕蜖燬譭匯彙會毀滙賄誨噦澮薈諱檜燴穢繢繪翽昬葷閽渾餛諢鍃鈥夥貨禍擭獲穫鑊飢勣嘰緝賫機璣積擊磯績雞譏饑躋鷄齎齏羈級極檝輯鶺幾魢擠蟣紀計記跡際劑薊嚌濟覬蹟鯽繫繼霽鱭驥夾浹傢裌鎵郟莢蛺餄鋏頰賈鉀檟價駕戔姦堅牋間監箋緘縑鋻艱殲鰜鶼籛鰹韉梘揀減筧戩儉撿檢襇瞼簡繭謭鐧譾鹼見剱閒漸劍澗賤踐劒劔薦諫鍵餞檻濺艦鑑鑒漿彊薑殭繮韁鱂奬蔣槳獎講將絳醬嬌澆膠鮫鵁驕鷦絞勦腳僥鉸餃撟矯繳攪呌較嶠轎階堦稭癤刦刦刧刼訐傑結節詰潔頡鮚屆誡藉觔璡巹僅盡緊錦謹饉勁晉進儘縉賮濜藎燼覲贐荊涇莖經鯨鶄驚阱剄穽穽頸弳徑逕逕淨脛痙靚靜鏡競坰埛絅逈熲糾揫鳩鬮韮廄廐舊鷲捄鋦駒侷跼舉擧櫸齟詎鉅劇據窶鋸屨颶懼鎸鵑鐫捲錈勌雋睠絹獧決玨訣絕絶橜譎覺鐝钁軍鈞皸鮶儁濬駿開鐦凱剴塏愷鍇鎧闓欬嘅愾龕偘埳堿闞矙粇穅匟鈧閌攷銬痾軻鈳頦顆殻剋尅緙課錁騍肎墾懇硜鏗摳瞘敂宼釦庫絝褲嚳誇塊儈鄶噲獪膾鱠寬髖欵誆誑況貺鄺壙曠礦纊鑛窺虧闚巋騤媿匱憒潰蕢餽簣聵饋崐崑褌錕鯤鵾梱壼綑閫睏擴濶闊辢臈臘蠟鑞來倈崍徠淶萊棶錸睞賚賴顂瀨癩籟嵐藍闌襤攔瀾籃蘭斕欄讕鑭嬾懶覽攬欖纜濫爛瑯蜋鋃閬撈勞嘮嶗癆鐒銠澇耮樂鰳餎縲纍鐳誄壘淚類稜棃犂貍氂犛蔾縭釐離灕蘺籬驪鱺鸝裡裏鋰禮鯉邐鱧茘涖琍厤慄蒞厲暦歴勵曆歷隷癘隸鬁嚦壢櫟瀝礪藶麗櫪礫糲蠣儷癧酈躒轢靂瓈倆連亷漣蓮匲奩匳憐褳聯簾鐮鰱籢槤璉斂歛臉襝蘞煉練殮鍊鏈瀲戀涼樑輬糧兩魎諒輛遼療繚鐐鷯釕瞭獵惏粦痳鄰隣燐臨麐轔鱗稟凜廩懍檁恡賃藺躪淩鈴綾蔆鴒霛鯪齡櫺靈欞領嶺畱瑠劉璢癅瀏鎦餾鏐飀騮鶹栁桺綹鋶霤鷚龍嚨瀧蘢曨朧櫳瓏矓礱籠聾隴壟壠攏哢衖婁僂嘍蔞樓耬螻髏嶁摟漊簍瘺瘻鏤嚕擼盧壚廬瀘蘆櫨爐臚罏艫轤鑪顱鱸鸕鹵虜滷魯擄瀂櫓氌艣艪鑥陸淥祿剹賂輅錄録濾轆籙鷺閭櫚驢呂侶屢鋁褸縷穭綠緑慮孌孿巒攣欒臠灤鑾鸞亂畧鋝掄侖倫圇崙淪綸輪論囉腡羅鏍儸騾玀蘿邏欏籮鑼驘躶臝絡犖駱濼嘸媽嬤蔴蟇馬獁瑪碼螞嘜榪禡罵駡嗎買蕒脈麥衇勱賣邁顢瞞饅鰻蠻滿蟎縵謾鏝貓錨夘戼鉚冐貿庅沒楳槑鎇鶥黴鎂門捫鍆悶燜懣們夢懞濛矇鸏錳瞇謎彌禰獼羋瀰祕覓覔冪謐綿緜俛緬靣麪麵鶓緲玅廟哶滅衊瑉緍緡冺湣閔黽閩憫鰵銘鳴繆謬麼麽糢謨饃饝歿鏌驀謀畝幙鉬拏挐鎿納鈉妳廼迺嬭枏柟難饢撓蟯鐃堖惱腦閙鬧訥餒內鈮蜺鯢擬暱膩鮎鯰撚輦攆孃釀鳥嫋裊蔦嬝揑隉喦嚙聶鎳孼囁齧躡鑷顳寜寧嚀擰獰薴檸聹濘紐鈕農儂辳噥濃膿穠駑釹瘧煖煗儺諾鍩歐毆甌謳鷗嘔慪漚槃盤蹣龐鰟麅皰砲礮肧賠錇珮轡噴鵬掽踫紕鈹闢毘鮍羆駢諞騗騙縹飃飄貧頻嬪顰缾評凴憑鮃蘋釙潑醱鉕廹頗撲鋪僕鏷樸譜鐠舖悽淒棲榿慼鏚旂棊碁頎齊錡臍騎騏蘄鯕蠐鰭豈啓啟綺氣訖棄憇磧薺牽釺僉鉛慳諐遷謙簽鵮騫籤韆乹鈐鉆鉗蕁錢淺膁潛繾譴俔塹槧縴羗嗆戧槍瑲錆蹌鏘鏹強墻嬙薔檣牆艢搶羥繈繦熗墝磽鍫鍬繰蹺喬僑蕎橋癄礄譙鞽顦陗殼誚竅翹愜篋鍥竊嶔親駸琹懃寢鋟唚欽搇撳氫傾廎輕鯖頃請檾慶煢窮瓊藭坵秌鞦鰌鰍虯毬巰賕區粬詘嶇敺趨麯軀麴驅鴝齲闃覰覷覻棬詮輇銓踡鰁權顴綣勸卻搉愨慤確闋闕鵲帬羣裠冄讓蕘橈饒嬈擾繞熱姙紉紝訒軔靭韌飪認馹毧絨羢榮螎嶸鎔蠑宂銣顬縟軟嫰輭蕋橤蘂銳叡閏潤篛灑颯薩顋鰓賽毿傘糝繖饊顙喪繅騷鰠掃嗇銫澁澀穡挱殺紗鎩鯊篩曬刪姍釤羶陝閃訕繕贍饍騸鱓鱔傷殤觴賞緔燒紹賒虵捨厙設慴懾攝灄紳葠蓡詵鰺審諗嬸瀋瀋讅腎滲瘮陞聲澠繩勝聖賸屍師溮溼獅詩鳲蝨鳾濕鯴釃時塒蒔實蝕識鰣駛柹昰眎眡視貰勢試軾鈰飾適諡謚釋壽綬夀獸倐書紓疎踈樞輸儵攄贖藷庻術竪潄數豎樹帥閂雙驦鸘誰稅順說説碩爍鑠絲噝廝緦螄鍶颸鷥佀竢飼禩駟鬆慫聳訟頌誦蒐鎪餿颼擻藪甦穌蘇囌泝訴肅遡謖驌鷫痠雖綏隨嵗歲誶孫猻蓀飱筍損簑縮嗩瑣鎖牠鉈墖獺鰨搨遝撻闒闥駘臺颱鮐擡檯鈦態貪嘽攤灘癱墰談壇曇錟罈壜譚罎鉭襢嘆撢歎賧湯蹚鏜鐋餳餹鎲儻燙弢絛搯縚縧濤韜綯鞀鞉檮討鋱謄騰籐鰧銻嗁綈緹蹏題鵜躰體屜薙鬀闐靦條齠鰷覜頫糶貼鉄銕鐵厛烴聼聽廳鋌頲衕銅鮦統筩慟偸媮頭禿凃塗圖釷兎團塼摶糰頹頽穨骽蛻飩魨臋扡拕託脫馱駝鴕鼉橢蘀籜媧窪鼃膃襪韤彎壪灣紈頑盌椀綰輓萬翫亾徃網輞朢鰃為韋圍幃溈爲違維潙潿濰闈偉偽葦煒瑋僞緯諉鮪韙蝟衛衞謂餧餵溫轀鰮紋聞螡閿蟁脗穩問鶲甕罋渦萵窩撾蝸臥臒齷汙汚烏鄔嗚誣鎢吳無蕪鵐啎娬塢嫵廡憮鵡務隖誤霧騖鶩晳厀誒餏錫谿譆犧習蓆覡襲鰼銑璽係郤細綌戯潟戲餼鬩煆蝦俠峽狹硤轄鎋廈嚇杴秈僊銛薟鍁鮮躚纖絃啣閑銜嫺嫻撏賢癇鹹鷳鷴鷼蜆險嶮獫獮蘚顯峴莧現羨綫線線憲縣餡獻鄉廂鄕薌緗鑲驤詳亯餉嚮鮝鯗響饗項曏梟綃嘵銷蕭鴞瀟簫嚻囂蠨驍曉篠効傚嘯歗斅蠍協挾脅脇衺擕諧擷鞵攜纈寫洩屓紲絏緤褻謝瀉蠏訢訢鋅鐔釁興騂陘鈃鉶倖兇洶胷訩詗脩鵂饈綉裦銹繡鏽訏虛須頊噓嬃諝鬚許詡卹勗敍敘壻賉漵緒續軒萲蕿諠諼藼蘐璿懸選癬絢楥鉉鏇鞾學嶨澩鱈謔勛塤勳壎燻廵尋詢馴潯鱘狥訊訓遜椏鴉鴨壓鵶枒啞瘂亞埡婭訝氬煙醃閹懕臙訁閆閆塩閻顏顔嚴簷巖巗鹽兗縯厴龑儼鼴魘黶彥覎硯厭鴈燄諺騐嚥艶贋贗讌醼饜驗鷰艷釅灧讞豓豔灩鍈鴦陽揚敭暘楊煬瘍鍚颺颺養癢樣堯軺搖遙瑤銚嶢窯窰餚謠鰩殀葯燿藥鷂鑰爺鋣埜壄亱頁葉業曄燁鄴謁爗饁靨吚禕銥毉醫迻詒貽飴儀遺彜頤彞迆釔螘艤蟻妷異軼兿義詣勩億瘞誼嶧憶懌瞖縊藝鎰繹譯議囈鐿鷁鷊驛讛囙陰陻隂蔭慇瘖銦駰唫婬滛誾銀齗齦飲隱癮廕憖鮣滎罃嬰應甖鎣嚶攖罌櫻瓔鶯纓鷹鸎鸚塋熒瑩營縈螢濚瀠蠅贏潁穎癭暎瀅喲傭鄘擁雝鏞鱅癰顒惥湧詠慂踴鯒憂優郵猶遊鈾蕕魷鮋銪祐誘紆娛魚崳漁諛餘覦踰歟璵輿俁傴與語鋙嶼齬飫馭鈺預嫗獄瘉慾澦蕷諭閾禦癒鵒譽鷸鬱籲淵鳶鴛員猨園圓緣蝯轅黿櫞遠願約彠戉悅鈅粵鉞閱閲嶽躍籥贇勻紜鄖雲溳氳澐蕓篔隕殞鄆惲運慍暈縕醖醞藴韞蘊韻帀紥紮臢襍雜災烖菑載簮偺喒儹攢趲暫賛贊鏨酇瓚讚賍贓髒贜駔塟臟蹧鑿棗皁唕竃譟竈則責嘖幘擇澤簀賾賊譖繒鋥贈劄齇軋牐閘鍘鮓柵詐搾摣齋債霑氈氊譫鸇斬盞嶄颭輾佔棧綻戰驏張麞漲鞝帳帳脹賬賬炤釗詔趙櫂摺輒蟄謫轍讁讋鍺這淛鷓珎貞針偵湞楨禎碪鍼診軫縝陣紖賑鴆鎮爭崢掙猙睜鉦徴箏徵錚癥幀証鄭諍證巵衹隻梔織姪執縶職蹠躑阯紙軹祑袠寘輊滯製誌銍幟摯稺質緻擲櫛穉贄觶騭躓鷙鑕終鈡鍾鍾鐘塚腫種眾衆週輈賙謅鵃軸箒呪紂晝葤皺縐驟硃誅銖諸豬瀦櫧櫫燭煑屬囑矚佇苧竚紵註貯筯駐築鑄專甎膞磚顓轉賺譔饌囀妝莊粧裝樁壯狀錐騅墜綴縋贅諄準槕斮斲諑鋜濁斵鐯鐲茲玆貲資緇輜諮錙鎡鯔齜姉眥漬椶綜蹤騣鬉傯縂總糉瘲縱鄒諏鯫騶鏃組詛躦鑽纘辠罇鱒㑳㘚㥮䝼䰾䲁䲘䴉';

    function traditionalized(orgStr){
        var str='', index, char;
        for(var i=0;i<orgStr.length;i++){
            char=orgStr.charAt(i);
            if(char.charCodeAt(0) > 10000){
                index=scStr.indexOf(char);
                if(index != -1)str+=tcStr.charAt(index);
                else str+=char;
            }
            else str+=char;
        }
        return str;
    }

    function simplized(orgStr){
        var str='', index, char;
        for(var i=0;i<orgStr.length;i++){
            char=orgStr.charAt(i);
            if(char.charCodeAt(0) > 10000){
                index=tcStr.indexOf(char);
                if(index != -1)str+=scStr.charAt(index);
                else str+=char;
            }
            else str+=char;
        }
        return str;
    }

    function setLanguage(){
        GM_setValue("action_" + location.hostname.toString().replace(/\./g,"_"), action);
        switch(action){
            case 1:
                //alert("已於該網域禁用簡繁切換");
                location.reload();
                break;
            case 2:
                //alert("已切换至简体中文");
                break;
            case 3:
                //alert("已切換至繁體中文");
                break;
        }
        if(action > 1){
            stranBody();
        }
    }

    function switchLanguage(){
        if(isSimple){
            action--;
            action=action<1?3:action;
        }else{
            action++;
            action=action>3?1:action;
        }
        setLanguage();
    }

    var saveAction=GM_getValue("action_" + location.hostname.toString().replace(/\./g,"_"));
    action=saveAction?saveAction:(isSimple?2:3);
    if(auto && action > 1){
        setTimeout(function(){
            stranBody();
            var MutationObserver = window.MutationObserver || window.WebKitMutationObserver || window.MozMutationObserver;
            var observer = new MutationObserver(function(records){
                records.map(function(record) {
                    if(record.addedNodes){
                        [].forEach.call(record.addedNodes,function(item){
                            stranBody(item);
                        });
                    }
                });
            });
            var option = {
                'childList': true,
                'subtree': true
            };
            observer.observe(document.body, option);
        },50);
    }

    var curLang=isSimple;
    document.addEventListener("keydown", function(e) {
        if(e.keyCode == shortcutKey && e.ctrlKey) {
            if("TEXTAREA"==document.activeElement.tagName){
                document.activeElement.innerHTML=curLang?traditionalized(document.activeElement.innerHTML):simplized(document.activeElement.innerHTML);
                curLang=!curLang;
            }else if("INPUT"==document.activeElement.tagName){
                document.activeElement.value=curLang?traditionalized(document.activeElement.value):simplized(document.activeElement.value);
                curLang=!curLang;
            }else{
                action=action==2?3:2;
                setLanguage();
            }
        }
    });

    GM_registerMenuCommand("繁簡切換【Ctrl+F8】", switchLanguage);
})();
